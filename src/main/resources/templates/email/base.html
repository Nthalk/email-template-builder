<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml"
      style="font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
<head>
    <meta name="viewport" content="width=device-width"/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>

    {% if header != null %}<title>{{ title }}</title>{% endif %}

    <style type="text/css">
        img {
            max-width: 100%;
        }

        body {
            -webkit-font-smoothing: antialiased;
            -webkit-text-size-adjust: none;
            width: 100% !important;
            height: 100%;
            line-height: 1.6em;
        }

        body {
            background-color: #f6f6f6;
        }

        @media only screen and (max-width: 640px) {
            body {
                padding: 0 !important;
            }

            h1 {
                font-weight: 800 !important;
                margin: 20px 0 5px !important;
            }

            h2 {
                font-weight: 800 !important;
                margin: 20px 0 5px !important;
            }

            h3 {
                font-weight: 800 !important;
                margin: 20px 0 5px !important;
            }

            h4 {
                font-weight: 800 !important;
                margin: 20px 0 5px !important;
            }

            h1 {
                font-size: 22px !important;
            }

            h2 {
                font-size: 18px !important;
            }

            h3 {
                font-size: 16px !important;
            }

            .container {
                padding: 0 !important;
                width: 100% !important;
            }

            .content {
                padding: 0 !important;
            }

            .content-wrap {
                padding: 10px !important;
            }

            .invoice {
                width: 100% !important;
            }
        }
    </style>
</head>

{% macro styleMargin(alignment,bottom="20px") %}
{% if alignment == 'LEFT' %}
margin: 0 0 {{bottom}} 0
{% elseif alignment == 'CENTER' %}
margin: 0 auto {{bottom}} auto
{% else %}
margin: 0 0 {{bottom}} auto
{% endif %}
{% endmacro %}


<body itemscope itemtype="http://schema.org/EmailMessage"
      style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; -webkit-font-smoothing: antialiased; -webkit-text-size-adjust: none; width: 100% !important; height: 100%; line-height: 1.6em; background-color: #f6f6f6; margin: 0;"
      bgcolor="#f6f6f6">

<table class="body-wrap"
       style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; width: 100%; background-color: #f6f6f6; margin: 0;"
       bgcolor="#f6f6f6">
    <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
        <td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;"
            valign="top"></td>
        <td class="container" width="600"
            style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; display: block !important; max-width: 600px !important; clear: both !important; margin: 0 auto;"
            valign="top">
            <div class="content"
                 style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; max-width: 600px; display: block; margin: 0 auto; padding: 20px;">

                {% if logo is not empty %}
                {% if logo.linkUrl is not empty %}<a target="_blank" style="text-decoration: none; border: 0;" href="{{logo.linkUrl | raw}}" title="{{- logo.title -}}">{% endif %}
                <img border="0" vspace="0" hspace="0"
                     src="{{- logo.src -}}"
                     width="{{- logo.width -}}" height="{{- logo.height -}}"
                     alt="{{- logo.alt -}}" title="{{- logo.title -}}" style="color: #000000; font-size: 10px; {{- styleMargin(alignment=logo.alignment) -}}; padding: 0; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; border: none; display: block;" />
                {% if logo.linkUrl is not empty %}</a>{% endif %}
                {% endif %}
                <table class="main" width="100%" cellpadding="0" cellspacing="0"
                       style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; border-radius: 3px; background-color: #fff; margin: 0; border: 1px solid #e9e9e9;"
                       bgcolor="#fff">
                    {% if header is not empty %}
                    <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                        <td class="alert alert-warning"
                            style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 16px; vertical-align: top; color: #{{- header.color.text | default('ffffff') -}}; font-weight: 500; text-align: {{- header.alignment.name | lower -}}; border-radius: 3px 3px 0 0; background-color: #{{- header.color.bg | default('457B9D') -}}; margin: 0; padding: 20px;"
                            align="{{- header.alignment.name | lower -}}" bgcolor="#{{- header.color.bg | default('457B9D') -}}" valign="top">
                            {{ header.title }}
                        </td>
                    </tr>
                    {% endif %}
                    <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                        <td class="content-wrap"
                            style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 20px;"
                            valign="top">
                            <table width="100%" cellpadding="0" cellspacing="0"
                                   style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">

                            {% for line in lines %}
                                {% if line.type == 'TEXT' %}
                                <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                                    <td class="content-block"
                                        style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px; text-align: {{- line.alignment.name | lower -}};{{- line.textCssStyle -}}"
                                        align="{{- line.alignment.name | lower -}}" valign="top">
                                        {% if line.asHtml %}
                                        {{ line.text | raw}}
                                        {% else %}
                                        {{ line.text }}
                                        {% endif %}
                                    </td>
                                </tr>
                                {% elseif line.type == 'IMAGE' %}
                                <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                                    <td class="content-block"
                                        style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px; text-align: {{- line.alignment.name | lower -}};"
                                        align="{{- line.alignment.name | lower -}}" valign="top">
                                        {% if line.linkUrl is not empty %}<a target="_blank" style="text-decoration: none; border: 0;" href="{{line.linkUrl | raw}}" {{- line.title -}}>{% endif %}
                                            <img border="0" vspace="0" hspace="0"
                                                 src="{{- line.src -}}" {% if line.width > 0 %}width="{{- line.width -}}"{% endif %} {% if line.height > 0 %}height="{{- line.height -}}"{% endif %} alt="{{- line.alt -}}" title="{{- line.title -}}"
                                                 style="color: #000000; font-size: 10px; {{- styleMargin(alignment=line.alignment,bottom="0") -}}; padding: 0; outline: none; text-decoration: none; -ms-interpolation-mode: bicubic; border: none; display: block;{% if line.width <= 0 and line.height <= 0 %}width: 100%; min-width:100%; height: auto;{% endif %}" />
                                        {% if line.linkUrl is not empty %}</a>{% endif %}
                                    </td>
                                </tr>
                                {% elseif line.type == 'BUTTON' %}
                                <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                                    <td class="content-block"
                                        style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 0 0 20px; text-align: {{- line.alignment.name | lower -}};"
                                        align="{{- line.alignment.name | lower -}}" valign="top">
                                        <a href="{{- line.url | raw -}}" class="btn-primary"
                                           style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; color: #{{- line.color.text | default('ffffff') -}}; text-decoration: none; line-height: 2em; font-weight: bold; text-align: center; cursor: pointer; display: inline-block; border-radius: 5px; background-color: #{{- line.color.bg | default('457B9D') -}}; {{- styleMargin(alignment=line.alignment,bottom="0") -}};; border-color: #{{- line.color.bg | default('457B9D') -}}; border-style: solid; border-width: 10px 20px;">{{ line.text }}</a>
                                    </td>
                                </tr>
                                {% elseif line.type == 'TABLE' %}
                                <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                                    <td class="content-block aligncenter" style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; text-align: center; margin: 0; padding: 0 0 20px;" align="center" valign="top">
                                    <table class="invoice"
                                           style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; text-align: left; width: {{- line.tableWidth -}}; margin: 40px auto;">
                                        <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                                            <td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 5px 0;"
                                                valign="top">
                                                <table class="invoice-items" cellpadding="0" cellspacing="0"
                                                       style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; width: 100%; margin: 0;">
                                                    {% if line.headerLine is not empty %}
                                                    <tr style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; margin: 0;">
                                                        <td style="font-family: 'Helvetica Neue',Helvetica,Arial,sans-serif; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0; padding: 5px 5px 5px 0;" align="{{- line.headerLine.alignment.name | lower -}}" valign="top"
                                                            {% if line.hasMiddleColumn and line.hasPrefixColumn %}colspan="4"
                                                            {% elseif line.hasMiddleColumn or line.hasPrefixColumn %}colspan="3"
                                                            {% else %}colspan="2"{% endif %}>
                                                            {% if line.headerLine.asHtml %}
                                                            {{ line.headerLine.text | raw}}
                                                            {% else %}
                                                            {{ line.headerLine.text }}
                                                            {% endif %}</td>
                                                    </tr>
                                                    {% endif %}
                                                    {% for row in line.rows %}
                                                    {% if row.type == 'ITEM' %}
                                                    <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                                                        {% if line.hasPrefixColumn %}<td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; border-top-width: 1px; border-top-color: #eee; border-top-style: solid; margin: 0; padding: 5px 5px 5px 0;{% if row.headerRow %}border-bottom-width: 2px;border-bottom-color: #333; border-bottom-style: solid;font-weight: 700;{% endif %}"
                                                                                         align="{{- row.alignPrefixColumn.name | lower -}}" valign="top"{% if line.priceWidth is not empty %} width="{{- line.prefixWidth -}}"{% endif %}>{{- row.prefix | default('') -}}</td>{% endif %}
                                                        <td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; border-top-width: 1px; border-top-color: #eee; border-top-style: solid; margin: 0; padding: 5px 5px 5px 0;{% if row.headerRow %}border-bottom-width: 2px;border-bottom-color: #333; border-bottom-style: solid;font-weight: 700;{% endif %}"
                                                            align="{{- row.alignmentFirstColumn.name | lower -}}" valign="top"{% if line.firstColumnWidth is not empty %} width="{{- line.firstColumnWidth -}}"{% endif %}>{{- row.product | default('') -}}</td>
                                                        {% if line.hasMiddleColumn %}<td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; border-top-width: 1px; border-top-color: #eee; border-top-style: solid; margin: 0; padding: 5px 5px 5px 0;{% if row.headerRow %}border-bottom-width: 2px;border-bottom-color: #333; border-bottom-style: solid;font-weight: 700;{% endif %}"
                                                                                         align="{{- row.alignMiddleColumn.name | lower -}}" valign="top"{% if line.middleWidth is not empty %} width="{{- line.middleWidth -}}"{% endif %}>{{- row.middle | default('') -}}</td>{% endif %}
                                                        <td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; text-align: right; border-top-width: 1px; border-top-color: #eee; border-top-style: solid; margin: 0; padding: 5px 5px 5px 0;{% if row.headerRow %}border-bottom-width: 2px;border-bottom-color: #333; border-bottom-style: solid;font-weight: 700;{% endif %}"
                                                            align="{{- row.alignmentPrice.name | lower -}}" valign="top"{% if line.priceWidth is not empty %} width="{{- line.priceWidth -}}"{% endif %}>{{- row.price | default('') -}}</td>
                                                    </tr>
                                                    {% elseif row.type == 'TOTAL' %}
                                                    <tr class="total"
                                                        style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                                                        <td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; {% if row.borderTop %}border-top-width: 2px;border-top-color: #333; border-top-style: solid;{% endif %}  {% if row.borderBottom %}border-bottom-width: 2px;border-bottom-color: #333; border-bottom-style: solid;{% endif %} font-weight: 700; margin: 0; padding: 5px 5px 5px 0;"
                                                            align="{{- row.alignmentFirstColumn.name | lower -}}" {% if line.hasMiddleColumn and line.hasPrefixColumn %}colspan="3"{% elseif line.hasMiddleColumn or line.hasPrefixColumn %}colspan="2"{% endif %} valign="top">{{- row.total | default('') -}}</td>
                                                        <td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; {% if row.borderTop %}border-top-width: 2px;border-top-color: #333; border-top-style: solid;{% endif %}  {% if row.borderBottom %}border-bottom-width: 2px;border-bottom-color: #333; border-bottom-style: solid;{% endif %} font-weight: 700; margin: 0; padding: 5px 5px 5px 0;"
                                                            align="{{- row.alignmentPrice.name | lower -}}" valign="top">{{- row.price | default('') -}}</td>
                                                    </tr>
                                                    {% endif %}
                                                {% endfor %}
                                                </table>
                                            </td>
                                        </tr>
                                    </table>
                                    </td>
                                </tr>
                                {% endif %}
                            {% endfor %}
                            </table>
                        </td>
                    </tr>
                </table>
                {% if footers is not empty or copyright is not null %}
                <div class="footer"
                     style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; width: 100%; clear: both; color: #999; margin: 0; padding: 20px;">
                    <table width="100%"
                           style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                        {% for line in footers %}
                        <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                            <td class="aligncenter content-block"
                                style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 12px; vertical-align: top; color: #999; text-align: center; margin: 0; padding: 0 0 15px; text-align: {{- line.alignment.name | lower -}};{{- line.textCssStyle -}}"
                                align="{{- line.alignment.name | lower -}}" valign="top">
                                {% if line.asHtml %}
                                    {{ line.text | raw}}
                                {% else %}
                                    {{ line.text }}
                                {% endif %}
                            </td>
                        </tr>
                        {% endfor %}
                        {% if copyright != null %}
                        <tr style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; margin: 0;">
                            <td class="aligncenter content-block"
                                style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 12px; vertical-align: top; color: #999; text-align: center; margin: 0; padding: 0 0 15px;"
                                align="center" valign="top">

                                &copy; {{ copyright.year }} {% if copyright.url is not empty %}<a href="{{ copyright.url | raw }}" style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 12px; color: #999; text-decoration: underline; margin: 0;">{% endif %}{{copyright.name }}{% if copyright.url is not empty %}</a>{% endif %}
                            </td>
                        </tr>
                        {% endif %}
                    </table>
                </div>
                {% endif %}
            </div>
        </td>
        <td style="font-family: {{- fontFamily | raw -}}; box-sizing: border-box; font-size: 14px; vertical-align: top; margin: 0;"
            valign="top"></td>
    </tr>
</table>
</body>
</html>
